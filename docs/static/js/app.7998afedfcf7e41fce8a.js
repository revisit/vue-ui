webpackJsonp([1],{"G4/0":function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("/5sW"),s=i("Tp4x"),n=i.n(s),o=i("Zzkc"),r={name:"ColorPicker",components:{"chrome-picker":o.Chrome},props:["color"],data:function(){return{colors:{hex:"#000000"},colorValue:"",displayPicker:!1}},mounted:function(){this.setColor(this.color||"#000000")},methods:{setColor:function(t){this.updateColors(t),this.colorValue=t},updateColors:function(t){if("#"===t.slice(0,1))this.colors={hex:t};else if("rgba"===t.slice(0,4)){var e=t.replace(/^rgba?\(|\s+|\)$/g,"").split(","),i="#"+((1<<24)+(parseInt(e[0],10)<<16)+(parseInt(e[1],10)<<8)+parseInt(e[2],10)).toString(16).slice(1);this.colors={hex:i,a:e[3]}}},showPicker:function(){var t=this;this.$nextTick(function(){document.addEventListener("click",t.documentClick)}),this.displayPicker=!0},hidePicker:function(){document.removeEventListener("click",this.documentClick),this.displayPicker=!1},togglePicker:function(){this.displayPicker?this.hidePicker():this.showPicker()},updateFromInput:function(){this.updateColors(this.colorValue)},updateFromPicker:function(t){this.colors=t,1===t.rgba.a?this.colorValue=t.hex:this.colorValue="rgba("+t.rgba.r+","+t.rgba.g+","+t.rgba.b+","+t.rgba.a+")"},documentClick:function(t){var e=this.$refs.colorpicker,i=t.target;e===i||e.contains(i)||this.hidePicker()}},watch:{colorValue:function(t){t&&(this.updateColors(t),this.$emit("input",t))}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"colorpicker",staticClass:"color-picker"},[i("span",{staticClass:"color-picker-input-container"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.colorValue,expression:"colorValue"}],staticClass:"color-picker-input",attrs:{type:"text"},domProps:{value:t.colorValue},on:{focus:function(e){t.showPicker()},input:[function(e){e.target.composing||(t.colorValue=e.target.value)},function(e){t.updateFromInput()}],keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key))return null;t.hidePicker()}}})]),t._v(" "),i("span",{staticClass:"color-picker-preview-container"},[i("span",{staticClass:"current-color",style:"background-color: "+t.colorValue,on:{click:function(e){t.togglePicker()}}}),t._v(" "),t.displayPicker?i("chrome-picker",{attrs:{id:"picker",value:t.colors},on:{input:t.updateFromPicker}}):t._e()],1)])},staticRenderFns:[]},c=i("VU/8")(r,l,!1,function(t){i("q877")},"data-v-69cb4b5e",null).exports,u=i("//Fk"),d=i.n(u),p=i("c/Tr"),m=i.n(p),v={name:"Dropzone",data:function(){return{isDragover:!1,isLoading:!1,isError:!1,errMsg:"",msgTimeoutMS:2500}},methods:{handleDrop:function(t){var e=this;this.isDragover=!1;var i=m()(t.dataTransfer.files);i.some(function(t){return"application/json"!==t.type})?(this.isError=!0,this.errMsg="Invalid file type (JSON only)",setTimeout(function(){e.isError=!1,e.errMsg=""},this.msgTimeoutMS)):this.handleFiles(i)},handleInput:function(){this.handleFiles(m()(this.$refs.fileInput.files))},handleFiles:function(t){var e=this;if(!this.isLoading){this.isError=!1,this.isLoading=!0;d.a.all(t.map(function(t){var e=new FileReader;return new d.a(function(i,a){e.onerror=function(){console.warn('File: "'+t.name+'"\n'+e.error),e.abort(),a(e.error)},e.onload=function(){try{var s=JSON.parse(e.result);i(s)}catch(e){console.warn('File: "'+t.name+'"\n'+e.message),a(e.message)}},e.readAsText(t)})})).then(function(t){e.isLoading=!1,e.$emit("data",t)}).catch(function(t){e.isLoading=!1,e.isError=!0,e.errMsg=t,setTimeout(function(){e.isError=!1,e.errMsg=""},e.msgTimeoutMS)})}}}},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{ref:"dropzone",staticClass:"box",class:{"is-dragover":t.isDragover,"is-loading":t.isLoading},on:{drag:function(t){t.preventDefault(),t.stopPropagation()},dragstart:function(t){t.preventDefault(),t.stopPropagation()},dragend:function(t){t.preventDefault(),t.stopPropagation()},dragexit:function(t){t.preventDefault(),t.stopPropagation()},dragover:function(t){t.preventDefault(),t.stopPropagation()},dragenter:function(e){e.preventDefault(),e.stopPropagation(),t.isDragover=!0},dragleave:function(e){e.preventDefault(),e.stopPropagation(),t.isDragover=!1},drop:function(e){e.preventDefault(),e.stopPropagation(),t.handleDrop(e)}}},[i("div",{staticClass:"box__input"},[i("input",{ref:"fileInput",staticClass:"box__file",attrs:{type:"file",name:"fileInput",id:"fileInput",accept:".json",multiple:""},on:{change:function(e){e.preventDefault(),e.stopPropagation(),t.handleInput(e)}}}),t._v(" "),i("span",{directives:[{name:"show",rawName:"v-show",value:!t.isLoading&&!t.isError,expression:"!isLoading && !isError"}]},[t._m(0),t._v(" "),i("span",[t._v("drop files, or paste a URL.")])])]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isLoading,expression:"isLoading"}],staticClass:"text-area"},[t._v("Loadingâ€¦")]),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.isError,expression:"isError"}],staticClass:"text-area"},[i("span",{staticStyle:{color:"red"}},[t._v("Error!")]),t._v("\n    "+t._s(t.errMsg)+".\n  ")])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("label",{staticClass:"box__label",attrs:{for:"fileInput"}},[e("strong",[this._v("Choose files,")])])}]},g=i("VU/8")(v,f,!1,function(t){i("znoy")},"data-v-58d15b92",null).exports,h={name:"app",data:function(){return{time:0,timeEnd:0,isPlaying:!1,slidingTime:!1,animation:null,speed:1,loopPlayback:!0,autoPlay:!1,currentColor:"#18453B",animationAvailable:!1,displaySettings:!1,displayDropzone:!0,value:null,objectNames:[],optionsReady:!0}},methods:{handleDragOver:function(t){this.displayDropzone=t||this.$refs.dropzone.isDragover||!this.animationAvailable},dataReady:function(t){console.log("parent",t),this.animationAvailable=!0,this.animation=t,this.displayDropzone=!1,this.isPlaying=!1,this.speed=1,this.timeEnd=t[0].duration,this.time=0,this.hideSettings(),this.updateObjects(t)},updateObjects:function(t){var e=this;this.value=null,this.objectNames=t[0].objects.map(function(t){return{id:t.name,label:t.name}}),this.optionsReady=!1,this.$nextTick(function(){e.optionsReady=!0})},closeVisualization:function(){this.animationAvailable=!1,this.isPlaying=!1,this.timeEnd=0,this.time=0,this.displaySettings=!1,this.displayDropzone=!0},onPaste:function(){var t=this;this.value=null,this.objectNames.push({id:"new",label:"New"}),this.optionsReady=!1,this.$nextTick(function(){t.optionsReady=!0})},showSettings:function(){var t=this;this.$nextTick(function(){document.addEventListener("click",t.documentClick)}),this.displaySettings=!0},hideSettings:function(){document.removeEventListener("click",this.documentClick),this.displaySettings=!1},toggleSettings:function(){this.displaySettings?this.hideSettings():this.showSettings()},documentClick:function(t){var e=this.$refs.settings,i=t.target;e===i||e.contains(i)||this.hideSettings()}},filters:{formatTime:function(t){return t.toFixed(2)},formatSpeed:function(t){return"x "+t.toFixed(1)}},mounted:function(){function t(n){a||(a=n);var o=n-a;a=n,!s.slidingTime&&s.isPlaying&&(s.time+=o/1e3*s.speed,!s.loopPlayback&&(s.time<0||s.time>s.timeEnd)?(s.isPlaying=!1,s.time=Math.max(0,Math.min(s.time,s.timeEnd))):s.time>s.timeEnd?s.time=0:s.time<0&&(s.time=s.timeEnd)),s.animationAvailable&&function(){e.width=window.innerWidth,e.height=window.innerHeight;var t=s.time/s.animation[0].timeStep,a=Math.floor(t),n=t-a,o=1-n,r=a+1>=s.animation[0].frames.length?a:a+1,l=s.animation[0].frames[a],c=s.animation[0].frames[r];s.animation[0].objects.forEach(function(t){var e=t.scale[0],a=t.scale[1],s=l[t.name][0]*o+c[t.name][0]*n,r=l[t.name][1]*o+c[t.name][1]*n;i.fillStyle=t.color,i.fillRect(s,r,e,a)})}(),window.requestAnimationFrame(t)}var e=this.$refs.canvas,i=e.getContext("2d"),a=null,s=this;window.requestAnimationFrame(t)},components:{colorpicker:c,treeselect:n.a,dropzone:g}},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{attrs:{id:"app"},on:{paste:t.onPaste,drag:function(t){t.preventDefault(),t.stopPropagation()},dragstart:function(t){t.preventDefault(),t.stopPropagation()},dragend:function(t){t.preventDefault(),t.stopPropagation()},dragexit:function(t){t.preventDefault(),t.stopPropagation()},dragover:function(t){t.preventDefault(),t.stopPropagation()},dragenter:function(e){e.preventDefault(),e.stopPropagation(),t.handleDragOver(!0)},dragleave:function(e){e.preventDefault(),e.stopPropagation(),t.handleDragOver(!1)},drop:function(t){t.preventDefault(),t.stopPropagation()}}},[i("div",{staticClass:"grid-maximize z0",class:{"hide-no-animation":!t.animationAvailable}},[i("canvas",{ref:"canvas",staticStyle:{width:"100%",height:"100%"}})]),t._v(" "),i("div",{ref:"settings",staticClass:"off-canvas",class:{"slide-canvas":t.displaySettings}},[i("div",{staticClass:"settings z2"},[t._m(0),t._v(" "),i("div",{staticClass:"settings-item"},[i("div",{staticClass:"toggle-switch-group"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.loopPlayback,expression:"loopPlayback"}],attrs:{type:"checkbox",name:"loopToggle",id:"loopToggle"},domProps:{checked:Array.isArray(t.loopPlayback)?t._i(t.loopPlayback,null)>-1:t.loopPlayback},on:{change:function(e){var i=t.loopPlayback,a=e.target,s=!!a.checked;if(Array.isArray(i)){var n=t._i(i,null);a.checked?n<0&&(t.loopPlayback=i.concat([null])):n>-1&&(t.loopPlayback=i.slice(0,n).concat(i.slice(n+1)))}else t.loopPlayback=s}}}),t._v(" "),i("label",{staticClass:"toggle-slider",attrs:{for:"loopToggle"}}),t._v(" "),i("label",{staticClass:"settings-label",attrs:{for:"loopToggle"}},[t._v("Loop Playback")])])]),t._v(" "),i("hr"),t._v(" "),i("div",{staticClass:"settings-item",staticStyle:{"line-height":"1rem"}},[t.optionsReady?i("treeselect",{attrs:{placeholder:"Select Object(s)...",multiple:!0,options:t.objectNames},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}):t._e()],1),t._v(" "),t._m(1),t._v(" "),i("div",{staticClass:"settings-item"},[t._m(2),t._v(" "),i("div",{staticClass:"settings-item-content"},[i("colorpicker",{attrs:{color:t.currentColor},model:{value:t.currentColor,callback:function(e){t.currentColor=e},expression:"currentColor"}})],1)])])]),t._v(" "),i("div",{staticClass:"grid-maximize ui-grid"},[i("dropzone",{directives:[{name:"show",rawName:"v-show",value:t.displayDropzone,expression:"displayDropzone"}],ref:"dropzone",staticClass:"ui-dropzone z3",on:{data:t.dataReady}}),t._v(" "),i("div",{staticClass:"ui-top-left z1",attrs:{disabled:!t.animationAvailable}},[i("div",{staticClass:"ui-button",on:{click:t.toggleSettings}},[t.displaySettings?i("i",{staticClass:"material-icons"},[t._v("close")]):i("i",{staticClass:"material-icons"},[t._v("menu")])])]),t._v(" "),i("div",{staticClass:"ui-top-right z1",attrs:{disabled:!t.animationAvailable}},[i("div",{staticClass:"ui-button",on:{click:t.closeVisualization}},[i("i",{staticClass:"material-icons"},[t._v("close")])])]),t._v(" "),i("div",{staticClass:"ui-bottom z1",attrs:{disabled:!t.animationAvailable}},[i("div",{staticClass:"player"},[i("div",{staticClass:"ui-button",on:{click:function(e){t.isPlaying=!t.isPlaying}}},[t.isPlaying?i("i",{staticClass:"material-icons"},[t._v("pause")]):i("i",{staticClass:"material-icons"},[t._v("play_arrow")])]),t._v(" "),i("div",{staticClass:"ui-button",on:{click:function(e){t.time=0}}},[i("i",{staticClass:"material-icons"},[t._v("replay")])]),t._v(" "),i("div",{staticClass:"player-text"},[t._v(t._s(t._f("formatTime")(t.time)))]),t._v(" "),i("div",{staticClass:"flex-auto"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.time,expression:"time",modifiers:{number:!0}}],attrs:{type:"range",min:"0",max:"10",step:"0.01"},domProps:{value:t.time},on:{mousedown:function(e){t.slidingTime=!0},mouseup:function(e){t.slidingTime=!1},__r:function(e){t.time=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("div",{staticClass:"player-text"},[t._v(t._s(t._f("formatTime")(t.timeEnd)))]),t._v(" "),i("div",{staticClass:"flex-20"},[i("input",{directives:[{name:"model",rawName:"v-model.number",value:t.speed,expression:"speed",modifiers:{number:!0}}],attrs:{type:"range",min:"-5",max:"5",step:"0.5"},domProps:{value:t.speed},on:{__r:function(e){t.speed=t._n(e.target.value)},blur:function(e){t.$forceUpdate()}}})]),t._v(" "),i("div",{staticClass:"player-text",on:{click:function(e){t.speed=1}}},[t._v(t._s(t._f("formatSpeed")(t.speed)))])])])],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"settings-item"},[e("div",{staticClass:"settings-button-group"},[e("input",{staticClass:"settings-button",attrs:{type:"button",name:"reset-camera",id:"reset-camera"}}),this._v(" "),e("label",{staticClass:"settings-label",attrs:{for:"reset-camera"}},[this._v("Reset Camera")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"settings-item"},[e("div",{staticClass:"toggle-switch-group"},[e("input",{attrs:{type:"checkbox",name:"followToggle",id:"followToggle"}}),this._v(" "),e("label",{staticClass:"toggle-slider",attrs:{for:"followToggle"}}),this._v(" "),e("label",{staticClass:"settings-label",attrs:{for:"followToggle"}},[this._v("Follow Model")])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"settings-item-label"},[e("label",{attrs:{for:"colorWell"}},[this._v("Color")])])}]},b=i("VU/8")(h,_,!1,function(t){i("G4/0")},null,null).exports;a.a.config.productionTip=!1,new a.a({el:"#app",render:function(t){return t(b)}})},q877:function(t,e){},znoy:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.7998afedfcf7e41fce8a.js.map